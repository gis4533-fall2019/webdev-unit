<!DOCTYPE html>
<html lang="en"><head><script async="" src="DUSPviz_files/analytics_002.js"></script><script src="DUSPviz_files/analytics.js" type="text/javascript"></script>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app202.us.archive.org';v.server_ms=234;archive_analytics.send_pageview({});});</script>
<script type="text/javascript" src="DUSPviz_files/bundle-playback.js" charset="utf-8"></script>
<script type="text/javascript" src="DUSPviz_files/wombat.js" charset="utf-8"></script>
<script type="text/javascript">
  __wm.init("https://web.archive.org/web");
  __wm.wombat("http://duspviz.mit.edu:80/web-map-workshop/leaflet-js/","20200129013311","https://web.archive.org/","web","/_static/",
	      "1580261591");
</script>
<link rel="stylesheet" type="text/css" href="DUSPviz_files/banner-styles.css">
<link rel="stylesheet" type="text/css" href="DUSPviz_files/iconochive.css">
<!-- End Wayback Rewrite JS Include -->

		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<meta charset="utf-8">
		<title>DUSPviz</title>
		<meta name="generator" content="Bootply">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="DUSPviz_files/font-awesome.css">
    <link rel="stylesheet" href="DUSPviz_files/bootstrap.css">
		<!--[if lt IE 9]>
			<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
    <link rel="stylesheet" href="DUSPviz_files/scrolling-nav.html">
		<link rel="stylesheet" href="DUSPviz_files/styles.css">
    <link rel="stylesheet" href="DUSPviz_files/prism.css">
	</head>
	<body><!-- BEGIN WAYBACK TOOLBAR INSERT -->
<style type="text/css">
body {
  margin-top:0 !important;
  padding-top:0 !important;
  /*min-width:800px !important;*/
}
</style>
<script>__wm.rw(0);</script>
<div id="wm-ipp-base" style="display: block; direction: ltr;" lang="en">
</div><div id="wm-ipp-print">The Wayback Machine - http://duspviz.mit.edu:80/web-map-workshop/leaflet-js/</div>
<div id="donato" style="position:relative;width:100%;">
  <div id="donato-base">
    <iframe id="donato-if" src="DUSPviz_files/donate.html" scrolling="no" style="width:100%; height:100%" frameborder="0">
    </iframe>
  </div>
</div><script type="text/javascript">
__wm.bt(650,27,25,2,"web","http://duspviz.mit.edu/web-map-workshop/leaflet-js/","20200129013311",1996,"/_static/",["/_static/css/banner-styles.css?v=omkqRugM","/_static/css/iconochive.css?v=qtvMKcIJ"], "False");
  __wm.rw(1);
</script>
<!-- END WAYBACK TOOLBAR INSERT -->
<nav class="navbar navbar-inverse navbar-fixed-top" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="http://duspviz.mit.edu/index.php" class="navbar-brand"><img class="img-responsive" id="logo-header" alt="duspviz-logo-main" src="DUSPviz_files/duspviz-navbar-codeglobe.png"></a>
    </div>
    <nav class="collapse navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">
        <li>
          <a href="http://duspviz.mit.edu/index.php">HOME</a>
        </li>
        <li>
          <a href="http://duspviz.mit.edu/index.php#calendar">CALENDAR</a>
        </li>
        <li>
          <a href="http://duspviz.mit.edu/tutorials">TUTORIALS</a>
        </li>
        <li>
          <a href="http://duspviz.mit.edu/resources">RESOURCES</a>
        </li>
		    <li>
          <a href="http://duspviz.mit.edu/contact">CONTACT</a>
        </li>
      </ul>
    </nav>
  </div>
</nav>



<!--main-->
<div class="container">
  <div class="row">
    <!--left-->
    <div class="col-md-3" id="leftCol">
      <!-- Department Menu
      ================================================== -->
      <ul id="sidebar" class="accordion nav nav-department nav-tabs nav-stacked affix-top">
      <div class="panel panel-default" style="background-color: #ffffff; border-color: #fff">
      <a href="http://duspviz.mit.edu/"><div class="panel-body">
        <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 550.47 791.96"><defs><style>.cls-1{fill:#2a3837;}</style></defs><title>DUSP MIT Small Logo - Grey - Transparent - Sonny&amp;apos;s Tweaks</title><path id="_Compound_Path_" data-name="&lt;Compound Path&gt;" class="cls-1" d="M126,17.54a14.07,14.07,0,0,0-6-3.67,21.73,21.73,0,0,0-4.14-.91H28.13V378.84h87.8a19.72,19.72,0,0,0,4.14-.91,15,15,0,0,0,9.6-9.59,22.12,22.12,0,0,0,.93-4.11V27.6a22.16,22.16,0,0,0-.93-4.13A13.93,13.93,0,0,0,126,17.54Zm-24.71,332H57.4V42.23h43.92Z"></path><path id="_Path_" data-name="&lt;Path&gt;" class="cls-1" d="M261.87,349.61V13H232.59V349.57H188.67V13H159.42V364.22a19.86,19.86,0,0,0,.91,4.11,13.74,13.74,0,0,0,3.65,5.94,13.56,13.56,0,0,0,6,3.65,19.66,19.66,0,0,0,4.08.91H291.61V349.61Z"></path><path id="_Compound_Path_2" data-name="&lt;Compound Path&gt;" class="cls-1" d="M430,42.19V378.82h29.25V203.17h58.54a19.68,19.68,0,0,0,4.13-.91,15,15,0,0,0,9.62-9.59,23.47,23.47,0,0,0,.92-4.14v-161a23.5,23.5,0,0,0-.92-4.13,14,14,0,0,0-3.66-5.93,14,14,0,0,0-6-3.67,21.69,21.69,0,0,0-4.13-.91L399.67,13h0V42.18ZM503.15,173.9H459.24V42.19h43.92Z"></path><rect id="_Path_2" data-name="&lt;Path&gt;" class="cls-1" x="294.76" y="237.19" width="29.29" height="109.86"></rect><path id="_Path_3" data-name="&lt;Path&gt;" class="cls-1" d="M382.9,378.79a16.27,16.27,0,0,0,9.9-4.44,16.6,16.6,0,0,0,4.47-10.16V173.74H324V41.94h44v102.5h29.27V12.65H309.36v0a16.58,16.58,0,0,0-10.15,4.47,16.35,16.35,0,0,0-4.47,10V203H368V349.49H294.74v15a15.23,15.23,0,0,0,13.84,14.29Z"></path><path class="cls-1" d="M201.67,479.22H172.42v283a19.86,19.86,0,0,0,.91,4.11,13.74,13.74,0,0,0,3.65,5.94,13.56,13.56,0,0,0,6,3.65,19.66,19.66,0,0,0,4.08.91h19.7l4.66-29.27h-9.72Z"></path><polygon class="cls-1" points="201.67 440.16 201.67 437.22 201.67 410.93 172.42 410.95 172.42 437.22 172.42 440.15 172.42 471.89 201.67 471.89 201.67 440.16"></polygon><path class="cls-1" d="M274.87,747.6l-29.36,0,55.69-322a23.5,23.5,0,0,0-.92-4.13,15.1,15.1,0,0,0-9.62-9.6,21.69,21.69,0,0,0-4.13-.91l-76.77,0v29.23H268.9L212.73,776.79l-.34,0h92.22V747.6Z"></path><path class="cls-1" d="M162.36,415.46a14,14,0,0,0-6-3.67,21.69,21.69,0,0,0-4.13-.91l-47,0v29.23h29.34L98.1,659.22,67.49,475.74,56.24,410.93H26.64l57.54,331.7.85,4.93L89.6,773.9l.51,2.93h16l.57-3.28,4.5-26,.84-4.85,53.91-317.19a8.71,8.71,0,0,0,.08-4.13A14,14,0,0,0,162.36,415.46Z"></path></svg>
      </div></a>
    </div>
    <div class="panel panel-default">
    <div class="panel-heading"><i class="fa fa-compass" aria-hidden="true"></i> Navigate</div>
      <div class="panel-body">
        <li><a href="http://duspviz.mit.edu/tutorials"><i class="fa fa-pencil"></i>  Tutorials</a></li>
        <li><a href="http://duspviz.mit.edu/resources"><i class="fa fa-link"></i>  Resources</a></li>
        <li><a href="http://duspviz.mit.edu/#calendar"><i class="fa fa-calendar"></i>  Calendar</a></li>
        <li><a href="http://duspviz.mit.edu/contact"><i class="fa fa-envelope-o" aria-hidden="true"></i>  Contact</a></li>
      </div>
    </div>
    <!-- <div class="panel panel-default">
      <div class="panel-heading"><i class="fa fa-question-circle"></i> Help</div>
      <div class="panel-body">
        <strong>OFFICE HOURS</strong><br>Tuesdays<br>9:30-11:30am<br>Room 9-512<hr><a href="https://dusp.mit.edu/oh">Make an appointment!</a><hr><a href="mailto:ehuntley@mit.edu?Subject=DUSPVIZ%20Inquiry"><i class="fa fa-envelope-o"></i> Send us an Email</a>
      </div>
    </div> -->
    <!-- <div class="panel panel-default">
      <div class="panel-heading"><i class="fa fa-calendar"></i> Upcoming Sessions
      </div>
      <div class="panel-body">
        <p style="margin-top: 0px; margin-bottom: 0px"><strong>Fall 2017</strong><br><a href="/#calendar"><i class="fa fa-calendar"></i>  View Calendar</a></p>
      </div>
    </div> -->
    <!-- <div class="panel panel-default">
      <div class="panel-body">
        <li><a href="#top-page" class="page-scroll">Go to Top of This Page</a></li>
      </div>
    </div> -->
    <!-- </ul> -->
    <!--/nav-list menu-->
  </ul></div><!--/left-->
<!--right-->
<div class="col-md-9" style="margin-top: 30px">

<a href="http://duspviz.mit.edu/web-map-workshop/" title="Web Map Workshop"><img src="DUSPviz_files/webMapWorkshop-logo-01.png" alt="webMapWorkshop-logo-01" class="aligncenter size-full wp-image-1405" width="100%"></a>

<hr>

<div id="header">
    <h1>Make a Web Map: Using LeafletJS</h1>
        <!-- <h4><span class="subtitle">Web Map Workshop | MIT DUSP | <a href="mailto:mjfoster@mit.edu?Subject=DUSPVIZ" target="_top">Mike Foster</a> | <a href="https://twitter.com/mjfoster83" target="_top">@mjfoster83</a></h4> -->
</div>

<div id="wrapper">
<hr>
<h2>Web Map Fundamentals: Creating a Basic Web Map</h2>

<hr>
<p><a href="http://duspviz.mit.edu/resources/leaflet_tutorial.zip" title="Workshop Materials" target="_blank"><i class="fa fa-external-link"></i> Download the Workshop Materials</a>.</p>
<hr>

<p>So, you know some basics about webpages and their elements. Now you 
want to make a web map. Great! This session is the first part of a 
series that introduce Leaflet, a Javascript library used to create 
interactive, web-based, mobile-friendly maps. Well, we haven't learned 
Javascript yet... that is okay. We will use Leaflet to introduce the 
concepts, then cover Javascript in a later session. With Leaflet, you 
can create a simple map in as little as three lines of code, or you can 
build complex, dynamic, and complex maps that contain hundreds of lines.
 It is up to you! This tutorial assumes you have worked through basics 
of a website, and have a working knowledge of HTML and CSS, and a very 
basic working knowledge of Javascript. The tutorial will build your 
knowledge of Javascript, and specifically the LeafletJS library, by 
building a web map from the ground up.</p>

<h3>Web Maps 101</h3>

<p>The term "web map" usually implies a map that is not simply <em>on</em> the web, but rather one that is <em>powered</em>
 by the web. A digital map is a map on a computer, a web map is depends 
on the internet. It is usually interactive, and not always 
self-contained, meaning that it can grab pieces hosted in other 
locations.</p>

<p>The two big concepts are tiles, which are gridded images that make up
 our basemaps, and feature data, which can be points, lines, and 
polygons. Tiles are <em>static and non-interactive</em>, while the feature data layers can be <em>dynamic and offer user interaction</em>. A great introduction is <a href="http://maptimeboston.github.io/web-maps-101/#0" title="Web Map 101 - Maptime Boston" target="_blank">Web Maps 101</a> from Maptime Boston, I suggest flipping through!</p>

<p>A vast overview of the <a href="http://duspviz.mit.edu/wp-content/uploads/2015/02/geowebUniverse1.png" title="Web Map Universe" target="_blank">web map universe</a>
 shows some of the many components that can be used to make a technology
 stack. We will focus on Leaflet, which is a front-end JavaScript 
library that allows creation of nice, mobile-friendly mapping 
applications.</p>

<h3>What is Leaflet?</h3>

<p><a href="http://leafletjs.com/" target="_blank">Leaflet</a>
 is an open-source JavaScript library for interactive web maps. It's 
lightweight, simple, and flexible, and is probably the most popular 
open-source mapping library at the moment. Leaflet is developed by <a href="http://agafonkin.com/en/" target="_blank">Vladimir Agafonkin</a> (currently of MapBox) and other contributors.</p>

<p><strong>What Leaflet does:</strong> "Slippy" maps with tiled base 
layers, panning and zooming, and feature layers that you supply. It 
handles various basic tasks like converting data to map layers and mouse
 interactions, and it's easy to extend with <a href="http://leafletjs.com/plugins.html" target="_blank">plugins</a>. It will also work well across most types of devices. See <a href="http://maptimeboston.github.io/web-maps-101/" target="_blank">MaptimeBoston's Web Map 101</a> for an introduction to the most common kinds of web maps, which is what Leaflet is good for.</p>

<p><strong>What Leaflet does not do:</strong> Provide any data for you! 
Leaflet is a framework for showing and interacting with map data, but 
it's up to you to provide that data, including a basemap. Leaflet is 
also not GIS, although it can be combined with tools like <a href="http://carto.com/" target="_blank">CARTO</a> or <a href="http://duspviz.mit.edu/web-map-workshop/leaflet-js/turfjs.org" target="_blank">
 if you need GIS-ish capabilities. If you need total freedom of form, 
interaction, transitions, and map projections, consider working with 
something like </a><a href="http://d3js.org/" target="_blank">D3</a>.</p>

<p><strong>How this tutorial works:</strong>We will start with an empty 
webpage, then progressively add components to make a Leaflet map. It 
assumes a basic knowledge of HTML and JavaScript, or at the very least 
assumes the will to tinker with the code to better understand what it 
does. Many code blocks will show only a snippet of code, highlighting 
the changes over previous examples. Click the "View this example on its 
own" link underneath a map to see complete code. For thorough 
documentation, see the <a href="http://leafletjs.com/reference.html" target="_blank">Leaflet site</a>.</p>

<p><strong>A couple quick tips.</strong></p>

<ul>
<li>Use a text editor for writing your code; we recommend Atom which is installed on all CRON machines and is available for free at <a href="http://atom.io/">atom.io</a>.</li>
<li>Keep all of your components in one folder. This will make locating specific files in your code much easier.</li>
<li>To put your map on the web, upload the folder with your website and 
map components (that we will create) to your web server. A note, 
however, most of this tutorial will work locally, but at the end we are 
going to add an external file. If you don't have access to the web, set 
up a localhost server. Here are some details <a href="http://en.wikipedia.org/wiki/Localhost" title="localhost Wikipedia" target="_blank">using Python to do so.</a></li>
</ul>

<!-- <p>The exercise today utilizes the Python HTTP Server method, which is very easy to run and set up, and only requires you have Python installed. It will work for our purposes. To do this, check which version of Python you have installed by opening terminal and typing <strong>python -V</strong></p>


<table>
    <tr>
        <th>Version</th>
        <th style="padding-left: 30px;">HTTP Server</th>
    </tr>
    <tr>
        <td>Python 2</td>
        <td style="padding-left: 30px;">python -m SimpleHTTPServer 8000</td>
    </tr>
    <tr>
        <td>Python 3</td>
        <td style="padding-left: 30px;">python -m http.server 8000</td>
    </tr>
</table>

<p>Navigate to this page by going to http://localhost:8000. If you have something running already on 8000, try 8080.</p> -->

<p><strong>What we are going to create (for today...)</strong></p>

<p>Our goal for the day will be to start from scratch and build the 
following map, with a tile base layer, some mapped data, and some basic 
interactivity. Our end result will be the following map, showing coffee 
shops, cafes, the MIT campus, and the Mass Ave Bridge.</p>

<div class="text-center">
    <iframe src="https://web.archive.org/web/20200129013311if_/http://duspviz.mit.edu/sessions/leaflet/leaflet-intro/map4c.html" scrolling="no" width="730px" height="400px"></iframe>
    <div class="caption" style="text-align: center">
        <h5>Our simple leaflet map. <small><a href="http://duspviz.mit.edu/sessions/leaflet/leaflet-intro/map4c.html" title="View the Example" target="_blank">(Click to view this example on its own.)</a></small></h5>
    </div>
</div>

<p>Let's get started! On to step one!</p>

<h2>1. Create a Webpage and Simple Map</h2>

<a href="http://duspviz.mit.edu/wp-content/uploads/2015/02/leafletjs_dataPackage.zip" title="Download the Materials" target="_blank">Download the Materials</a>

<h4>a. Work within our working folder</h4>
<p>We want to work within a contained folder that serves as a server 
directory. Use the provided materials folder. This folder will store all
 of the files associated with our specific web page and web map. Save 
subsequent files here. <strong>This is the folder in which we are running our Python server.</strong> This is referred to as our web folder.</p><p>

</p><h4>b. Setup a web page for our map</h4>

<p>Open up your text editor. Once in your text editor, we are going to set up an empty <strong>index.html</strong>
 template for our web page that will contain our web map and web map 
elements. The components will be the same as always, note the <code>head</code>, <code>title</code>, and <code>body</code>.</p>

<p>Enter the following code into your blank HTML page.</p>

<pre class=" language-markup"><code class=" language-markup"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Leaflet Map<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment" spellcheck="true">&lt;!-- Our web map and content will go here --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre>

<p>From here, we will do the following four things to add a map to our page:</p>

<ul>
<li>Reference the Leaflet CSS and JavaScript files.</li>
<li>Add a <code>div</code> element to our page that will hold the map.</li>
<li>Create a <code>map</code> object in Javascript that will interact with the map <code>div</code> element</li>
<li>Add the tiled <a href="http://www.openstreetmap.org/#map=5/51.500/-0.100" title="OpenStreetMap" target="_blank">OpenStreetMap</a> basemap to our <code>map</code> object using <code>tileLayer</code></li>
</ul>

<h4>c. Reference the Leaflet CSS and JavaScript files</h4>

<p>We need to load Leaflet into our web page before we can start using 
the library. There are two options for doing this, we can download the 
library files from the <a href="http://leafletjs.com/download.html" title="Leaflet Download Site" target="_blank">Leaflet download site</a>,
 or we can use the hosted version. We are not planning on changing the 
JavaScript or the CSS, so it is easiest to use the hosted libraries. 
Reference these in your HTML by adding the following lines of code.</p>

<p>Within the <code>head</code> section, after <code>title</code>, copy and paste the following. This adds the Leaflet CSS file to our web page and includes Leaflet styles.</p>

<pre class=" language-markup"><code class=" language-markup"><span class="token comment" spellcheck="true">&lt;!-- External Stylesheets --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://unpkg.com/leaflet@1.0.3/dist/leaflet.css<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></code></pre>

<p>Link to the JavaScript library at the bottom of the <code>body</code>
 section of our site, putting it at the bottom allows our page to load 
faster. Copy and paste the following. This adds the Leaflet JS file to 
our web page and is the Leaflet Javascript library.</p>

<pre class=" language-markup"><code class=" language-markup"><span class="token comment" spellcheck="true">&lt;!-- Add the Leaflet JavaScript library --&gt;</span>
<span class="token script language-javascript"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://unpkg.com/leaflet@1.0.3/dist/leaflet.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span></code></pre>

<p>We can now begin working with the Leaflet library.</p>

<h4>d. Add a map <code>div</code></h4>

<p>Add a <code>div</code> to the body that will hold the map. This is just like any other <code>div</code> element we might use. We will set the style right in the <code>div</code> using the <code>style</code> attribute, and not the CSS file, otherwise all map <code>div</code>s we create will have the same styling.</p>

<pre class=" language-markup"><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>map<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span> 705px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 375px</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>

<h4>e. Use Javascript to create the map object</h4>

<p>Now we can start coding the map using JavaScript. The Leaflet library is referenced by using <code>L.</code> followed by the class. The first step is to create the <code>map</code> object using the map class. Set the variable <code>map</code> to be our Leaflet map object. More reading on <a href="http://leafletjs.com/reference.html#map-class" title="L.map Documentation" target="_blank">L.map</a>
 can be found in the extensive Leaflet documentation. Set the center of 
the map to be at MIT (42.362432, -71.086086) and zoom level to 14. Enter
 the following in our document at the end of the <code>body</code> section.</p>

<pre class=" language-javascript"><code class=" language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token comment" spellcheck="true">// Create variable to hold map element, give initial settings to map</span>
    <span class="token keyword">var</span> map <span class="token operator">=</span> L<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token string">'map'</span><span class="token punctuation">,</span><span class="token punctuation">{</span> center<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">42.362432</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">71.086086</span><span class="token punctuation">]</span><span class="token punctuation">,</span> zoom<span class="token punctuation">:</span> <span class="token number">14</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></code></pre>

<p><em>Note the script tags, this is where we will will put all of our JavaScript for the map.</em></p>

<h4>f. Add a tiled basemap with tileLayer</h4>

<p>The last step in getting a basic map running is add a layer. We are 
going to use what is called a tile layer, which is a fundamental 
technology behind many web maps. An excellent crash course on web maps 
and the usage of tiles was created by <a href="https://twitter.com/maptimeBoston" title="MaptimeBoston" target="_blank">MaptimeBoston</a>, and can be found <a href="http://maptimeboston.github.io/web-maps-101/#0" title="MaptimeBoston: Webmap 101" target="_blank">here</a>.<br><br>

There are many tile layers you can add to your maps. The one we are 
going to use today is from OpenStreetMap. To add a tile layer to the 
map, we use the <a href="http://leafletjs.com/reference.html#tilelayer" title="L.tileLayer class" target="_blank">L.tileLayer</a> class. Place the following code within your <code>script</code> tags.</p>

<pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// Add OpenStreetMap tile layer to map element</span>
L<span class="token punctuation">.</span><span class="token function">tileLayer</span><span class="token punctuation">(</span><span class="token string">'http://{s}.tile.osm.org/{z}/{x}/{y}.png'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> attribution<span class="token punctuation">:</span> <span class="token string">'© OpenStreetMap'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addTo</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p><em>Note the <code>attribution</code>. Here we can provide reference 
for the source of the base map, and any other attribution for map 
elements we want to provide. It will appear in the lower right corner of
 our map by default, but you can change this. <a href="http://leafletjs.com/reference.html#control-attribution-options" title="Attribution Documentation" target="_blank">Read more about attribution here.</a></em></p>

<h4>Our Basic Map</h4>

<p>Save your HTML document and open it in your web browser. You will see the map we just created!</p>

<div class="text-center">
    <iframe src="https://web.archive.org/web/20200129013311if_/http://duspviz.mit.edu/sessions/leaflet/leaflet-intro/map1.html" scrolling="no" width="730px" height="400px"></iframe>
    <div class="caption" style="text-align: center">
        <h5>Our basic map. <small><a href="http://duspviz.mit.edu/sessions/leaflet/leaflet-intro/map1.html" title="View the Example" target="_blank">(Click to view this example on its own.)</a></small></h5>
    </div>
</div>

<h4><em>Additional Tile Layers</em></h4>

<p>There are a number of resources that have tile layers you can use 
with Leaflet JS. An excellent resource for examining and previewing tile
 layers is called Leaflet Provider. Scan through <a href="http://leaflet-extras.github.io/leaflet-providers/preview/" title="Leaflet Provider" target="_blank">available tile layers and preview them</a>, and try replacing the L.tileLayer with one of the other tile layers in your code.</p>

<h4><em>Loading a WMS</em></h4>

<p>You can also add Web Map Services to your Leaflet maps using <a href="http://leafletjs.com/reference.html#tilelayer-wms" title="L.tileLayer.wms Documentation" target="_blank">L.tileLayer.wms</a>. Change your basemap using one of the listed tilesets!</p>

<h2>2. Add Individual Data to our Map</h2>

<p>To introduce adding data, we will learn how to add markers, 
polylines, and polygons to our map. There are multiple methods for 
adding data, including methods in which you can large datasets. Before 
getting ahead of ourselves though, this section will show how you can 
simple points, polylines, and polygons to your map.</p>

<h4>a. Adding Points (aka Markers)</h4>

<p>To add a point to your map, we use the <a href="http://leafletjs.com/reference.html#marker" title="L.marker Documentation" target="_blank">L.marker</a>
 class. To add a point, we specify a latitude and longitude, then add 
the marker to our map. Enter the following line of code in the <code>script</code> block in the <code>body</code> section of the document, following the tile layer.</p>

<pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// Create point feature for Kendall Square T Station</span>
<span class="token keyword">var</span> myDataPoint <span class="token operator">=</span> L<span class="token punctuation">.</span><span class="token function">marker</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">42.362432</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">71.086086</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addTo</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<h4>b. Adding Polylines</h4>

<p>To add a polyline (a line that can have multiple segments) to your map, we use the <a href="http://leafletjs.com/reference.html#polyline" title="L.polyline Documentation" target="_blank">L.polyline</a>
 class. Just like with the marker, we use latitude and longitude to add 
the line vertices. An important difference however, is that we need to 
add a color and weight, if we don't add a weight you won't be able to 
see the line. You can set style options in brackets after the array of 
line vertices. NOTE: the polyline is formed by an array, and draws in 
that order. Enter the following into our <code>script</code>.</p>

<pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// Create line feature for Mass Ave Bridge, style and add to map</span>
<span class="token keyword">var</span> myDataLine <span class="token operator">=</span> L<span class="token punctuation">.</span><span class="token function">polyline</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">42.357227</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">71.092631</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">42.351411</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">71.089723</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span> weight<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addTo</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<h4>c. Adding Polygons</h4>

<p>Adding polygons is very similar, we use the <a href="http://leafletjs.com/reference.html#polygon" title="L.polygon Documentation" target="_blank">L.polygon</a>
 class. Specify a latitude and longitude for each node, then add to our 
map. Set the style just the same. Enter the following in our <code>script</code>.</p>

<pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// Create area feature for MIT, style and add to map</span>
<span class="token keyword">var</span> myArea <span class="token operator">=</span> L<span class="token punctuation">.</span><span class="token function">polygon</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">42.353770</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">71.103606</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">42.355447</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">71.104475</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">42.362681</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">71.089830</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">42.361829</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">71.079230</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token string">'blue'</span><span class="token punctuation">,</span> weight<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addTo</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>Save your document and refresh your browser.</p>

<h4>Other Simple Vector Data Types</h4>

<p>There are a number of other simple data types and groups you can add,
 read more about them in the Leaflet documentation. These include:</p>

<ul>
    <li><a href="http://leafletjs.com/reference.html#path">Path</a></li>
    <li><a href="http://leafletjs.com/reference.html#multipolyline">MultiPolyline</a></li>
    <li><a href="http://leafletjs.com/reference.html#multipolygon">MultiPolygon</a></li>
    <li><a href="http://leafletjs.com/reference.html#rectangle">Rectangle</a></li>
    <li><a href="http://leafletjs.com/reference.html#circle">Circle</a></li>
    <li><a href="http://leafletjs.com/reference.html#circlemarker">CircleMarker</a></li>
</ul>

<h4>Feature Groups and GeoJSON</h4>

<p>Leaflet also supports adding groups of features using class called <a href="http://leafletjs.com/reference.html#featuregroup" title="L.featureGroup Documentation" target="_blank">L.featureGroup</a>.
 If we wanted, we could have restructured our code to the point, line, 
and polygon above by placing them all in a feature group.</p>

<p>Additionally, Leaflet is designed work natively with a spatial data 
format called GeoJSON. GeoJSON are lightweight JavaScript objects that 
are commonly used to pass and load data to web maps. We will look at 
them later in this exercise, but first, let's add some interactive 
pop-ups to our map. At this point we have some features loaded, and it 
should look something like the following.</p>

<div class="text-center">
    <iframe src="https://web.archive.org/web/20200129013311if_/http://duspviz.mit.edu/sessions/leaflet/leaflet-intro/map2.html" scrolling="no" width="730px" height="400px"></iframe>
    <div class="caption" style="text-align: center">
        <h5>Our basic map, now with features! <small><a href="http://duspviz.mit.edu/sessions/leaflet/leaflet-intro/map2.html" title="View the Example" target="_blank">(Click to view this example on its own.)</a></small></h5>
    </div>
</div>

<p><em><strong>Where did I get my Lat/Lon values?</strong> A nice trick 
can be navigating to Google Maps, right clicking on a location on the 
map, and selecting 'What's here?'. This will provide latitude and 
longitude values for that location you can then copy.</em></p>

<h2>3. Add Interactivity with Pop ups</h2>

<p>Leaflet makes it easy to add pop ups to your data points. Pop ups are
 a simple way to add interactivity to your map. When a viewer clicks on 
the pop up, information will be displayed. Pop ups are included by 
binding them to the marker or feature that you wish to apply a pop up 
on. When the visitor clicks on this feature, the bound pop up will 
appear.</p>

<h4>Add a pop up to our marker layer</h4>

<p>There is a marker sitting on our map at Kendall Square. Let's add a 
popup that tells us this is Kendall Square. The simplest way to add a 
pop up is to use the <a href="http://leafletjs.com/reference.html#marker-bindpopup" title="bindPopup documentation" target="_blank">bindPopup</a> method of L.marker. Enter the following code in your <code>script</code> block in your HTML document, and we will step through what is happening.</p>

<pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// Bind popup to Data Point object</span>
myDataPoint<span class="token punctuation">.</span><span class="token function">bindPopup</span><span class="token punctuation">(</span><span class="token string">"This is Kendall Square."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>Save and refresh your map. Click on the marker. You will see a pop up
 stating "This is Kendall Square." appear. bindPopup is 'method' of our 
marker object class, just like addTo('map') we used above. Methods are 
actions that can be performed on objects, and marker is an object. Also 
note, within the quotations where we wrote "This is Kendall Square.", we
 can write HTML as content. Change the code to the following, and see 
what happens.</p>

<pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// Bind popup to data point object</span>
myDataPoint<span class="token punctuation">.</span><span class="token function">bindPopup</span><span class="token punctuation">(</span><span class="token string">"&lt;h3&gt;Kendall Square&lt;/h3&gt;&lt;p&gt;Cambridge, MA&lt;br&gt;Information about Kendall Square.&lt;/p&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>This means, within our popup, we can add links, images, lists, and 
many other HTML elements. This includes videos! For fun, try adding a 
YouTube clip!</p>

<h4>Add pop ups to our other data features</h4>

<p>Just like with the marker object, we can add pop ups to our other 
features using the bindPopup method. Use the variable that we set the 
feature to (ie <code>var = myDataPoint</code>, <code>var = myDataLine</code>, and <code>var = myArea</code>) as the object, then use bindPopup. Enter the following block of code in your script tags, after the other code.</p>

<pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// Bind popup to line object</span>
myDataLine<span class="token punctuation">.</span><span class="token function">bindPopup</span><span class="token punctuation">(</span><span class="token string">"Mass Ave Bridge"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// Bind popup to area object</span>
myArea<span class="token punctuation">.</span><span class="token function">bindPopup</span><span class="token punctuation">(</span><span class="token string">"MIT Campus"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>Save and refresh. Click on the data features to see the pop ups in action.</p>

<div class="text-center">
    <iframe src="https://web.archive.org/web/20200129013311if_/http://duspviz.mit.edu/sessions/leaflet/leaflet-intro/map3.html" scrolling="no" width="730px" height="400px"></iframe>
    <div class="caption" style="text-align: center">
        <h5>Map with Features and Popups <small><a href="http://duspviz.mit.edu/sessions/leaflet/leaflet-intro/map3.html" title="View the Example" target="_blank">(Click to view this example on its own.)</a></small></h5>
    </div>
</div>

<h2>4. Introduction to Map Events</h2>

<p>What the map does when a user interacts with it and its various 
components is called an Event. A pop up is a very basic built-in event, 
but there are many other events that Leaflet can handle. Take a at some 
of the events the map object can handle <a href="http://leafletjs.com/reference.html#map-click" title="Events" target="_blank">here</a>.
 The main one we will focus on here is what happens when a visitor 
clicks on the map, or what happens when there is a "Mouse Event". When a
 visitor clicks on the map, you can return a handful of different 
properties. One of them is latitude and longitude, making it easy to add
 simple functionality that will return <a href="http://leafletjs.com/reference.html#events-latlng" title="latlng documentation" target="_blank">latitude and longitude</a> of the location where the mouse was clicked.</p>

<h4>Find Latitude and Longitude of a Mouse Click</h4>

<p>To complete that task, we need to do a couple of things.</p>

<ol>
<li>Add an empty pop up object to our map.</li>
<li>Write a function that creates a pop up.</li>
<li>Tell the map that when it is clicked, run this function</li>
</ol>

<p><a id="latLonClickEvent"></a>The following snippet of code does just 
that. Read through it and see how it addresses each step. Enter this 
into document in between the script tags.</p>

<pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// Create an Empty Popup</span>
<span class="token keyword">var</span> popup <span class="token operator">=</span> L<span class="token punctuation">.</span><span class="token function">popup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// Write function to set Properties of the Popup</span>
<span class="token keyword">function</span> <span class="token function">onMapClick</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    popup
        <span class="token punctuation">.</span><span class="token function">setLatLng</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>latlng<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span><span class="token string">"You clicked the map at "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>latlng<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">openOn</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// Listen for a click event on the Map element</span>
map<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> onMapClick<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>Let's break this down a bit. First we created our empty pop up object using <a href="http://leafletjs.com/reference.html#popup" title="L.popup Documentation" target="_blank">L.popup()</a>.
 The next part is a JavaScript function. A JavaScript function is a 
block of code designed to perform a particular task and is executed when
 calls it.<br><br><a href="http://www.w3schools.com/js/js_functions.asp" title="JS Functions W3Schools" target="_blank">More information on Javascript functions</a>.<br><br>
In this case, the function changes the properties of the pop up, or in 
our case, sets them, because the pop up object is empty. It sets the lat
 and lon of the pop up to the location of the mouse click, sets the 
content of the popup to say what that location is (has to convert it to a
 string to do so), and then opens the popup on the map. Finally, the 
last piece, is an event on the map object that says on click, run the 
function onMapClick. Complex, yet surprisingly simple all at once.</p>

<p>Save and refresh. Click on the data features to see the pop ups in action.</p>

<div class="text-center">
    <iframe src="https://web.archive.org/web/20200129013311if_/http://duspviz.mit.edu/sessions/leaflet/leaflet-intro/map4.html" scrolling="no" width="730px" height="400px"></iframe>
    <div class="caption" style="text-align: center">
        <h5>Map with Lat/Lon Click <small><a href="http://duspviz.mit.edu/sessions/leaflet/leaflet-intro/map4.html" title="View the Example" target="_blank">(Click to view this example on its own.)</a></small></h5>
    </div>
</div>

<p>More on events is found in the Leaflet documentation, under each 
object, look at the events and properties that are available for you to 
utilize and manipulate.</p>

<h2>5. Use JQuery and Add a GeoJSON</h2>

<p>Learning the fundamentals of adding small datasets to our map along 
with some basic interactivity is important, but often times you will be 
adding larger datasets to our maps, sometimes containing hundreds of 
features. Leaflet is designed to work natively with a data format called
 <a href="http://geojson.org/" title="geojson" target="_blank">GeoJSON</a>. GeoJSON is <a href="http://www.w3schools.com/js/js_objects.asp" title="w3schools JavaScript Objects" target="_blank">JavaScript object</a>
 that contains geographic data. This might not make sense right now, and
 that is fine, we will discuss JavaScript in depth in the next session. 
But for now, lets look at one way to load a GeoJSON into our map.</p>

<h4>The GeoJSON: Cambridge Coffee Shops and Cafes</h4>

<p>In the downloaded materials, there is a <strong>data</strong> folder that contains a file called <strong>"coffee_cafes.geojson"</strong>.
 This is a dataset of 79 coffee shops in Cambridge. Quite handy if you 
need a caffeine fix and are looking for where to go! Open up the GeoJSON
 in your text editor to see what a GeoJSON looks like.</p>

<h4>Use the JQuery JavaScript Library</h4>

<p>The first thing we want to do is add a super common and super useful JavaScript library called <a href="http://jquery.com/" title="JQuery Homepage" target="_blank">jQuery</a>
 to our page. jQuery makes it easy to manipulate a web page by finding 
elements on the page, setting their styles and properties, handling 
interaction events, and more. It has a nice helper method, called 
getJSON(), we will to use to load our GeoJSON file onto our map.</p>

<p>Enter the following line of code at the bottom of the <code>body</code> section to add the jQuery library to our page after the lines that add the Leaflet JavaScript library.</p>

<pre class=" language-markup"><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    ...
        <span class="token comment" spellcheck="true">&lt;!-- HTML Page Elements are here --&gt;</span>
    <span class="token script language-javascript"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
        <span class="token comment" spellcheck="true">&lt;!-- Web Map Scripts are here --&gt;</span>
    ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></code></pre>

<h4>Add the GeoJSON</h4>

<p>To add the GeoJSON to your map, use <a href="http://api.jquery.com/jquery.getjson/" title="getJSON documentation" target="_blank">$.getJSON()</a>.
 The $ signifies we are using an object from the jQuery library, and 
getJSON is the object. Within the brackets, we put the location of the 
GeoJSON on our server (<code>"data/coffee_cafes.geojson"</code>), then a callback function (<code>function(data)</code>) that executes if the GeoJSON is found. The callback function will contain the code that will add the GeoJSON to our map.</p>

<p>To add the GeoJSON to the map, use <a href="http://leafletjs.com/reference.html#geojson" title="L.geoJson documentation" target="_blank">L.geoJson()</a> the Leaflet library. Pass the dataset to L.geoJson, then add it to the map element. Simple enough right?</p>

<p>Add the following code to your <code>script</code>, between the script tags.</p>

<pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// load GeoJSON from an external file</span>
$<span class="token punctuation">.</span><span class="token function">getJSON</span><span class="token punctuation">(</span><span class="token string">"coffee_cafes.geojson"</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// add GeoJSON layer to the map once the file is loaded</span>
    L<span class="token punctuation">.</span><span class="token function">geoJson</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addTo</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

<p>Simple enough right? Click save and refresh your page to see the GeoJSON added to the map. Cambridge has a lot of coffee shops!</p>

<div class="text-center">
    <iframe src="https://web.archive.org/web/20200129013311if_/http://duspviz.mit.edu/sessions/leaflet/leaflet-intro/map4b.html" scrolling="no" width="730px" height="400px"></iframe>
    <div class="caption" style="text-align: center">
        <h5>Map with Loaded Data <small><a href="http://duspviz.mit.edu/sessions/leaflet/leaflet-intro/map4b.html" title="View the Example" target="_blank">(Click to view this example on its own.)</a></small></h5>
    </div>
</div>

<h4>Add Popups to Show Coffee Shop Name</h4>

<p>We can see the points, but they might not be very useful without 
adding popups. We can add popups in a very similar manner as above, 
except since we are using a full dataset, it doesn't make much sense to 
add them one by one. The L.geoJson object has a option called 
onEachFeature that runs a function on each feature when it is added to 
the map. We can use this to run a function that adds a popup to each 
feature when it is added to the map. The syntax, which goes in brackets 
after we specify the data we are adding, looks like the following. Enter
 this into your <code>getJSON</code> and <code>L.geoJson</code> functions.

</p><pre class=" language-javascript"><code class=" language-javascript">$<span class="token punctuation">.</span><span class="token function">getJSON</span><span class="token punctuation">(</span><span class="token string">"coffee_cafes.geojson"</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// add GeoJSON layer to the map once the file is loaded</span>
    L<span class="token punctuation">.</span><span class="token function">geoJson</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span><span class="token punctuation">{</span>
        onEachFeature<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>feature<span class="token punctuation">,</span> layer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            layer<span class="token punctuation">.</span><span class="token function">bindPopup</span><span class="token punctuation">(</span>feature<span class="token punctuation">.</span>properties<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addTo</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>Once entered, save and refresh your page. Click on one of the popups,
 you will see the name of the coffee shop appear. Don't worry if you are
 a bit confused, we will explain what happened in depth during the next 
session!</p>

<div class="text-center">
    <iframe src="https://web.archive.org/web/20200129013311if_/http://duspviz.mit.edu/sessions/leaflet/leaflet-intro/map4c.html" scrolling="no" width="730px" height="400px"></iframe>
    <div class="caption" style="text-align: center">
        <h5>Map with Popups and Loaded Data <small><a href="http://duspviz.mit.edu/sessions/leaflet/leaflet-intro/map4c.html" title="View the Example" target="_blank">(Click to view this example on its own.)</a></small></h5>
    </div>
</div>

<h4>Other Data Formats</h4>

<p>There are also a couple of very useful plugins, one called <a href="https://github.com/mapbox/leaflet-omnivore" title="leaflet-omnivore" target="_blank">Leaflet Omnivore</a>, that can read in other data formats, and <a href="https://github.com/calvinmetcalf/leaflet.shapefile" title="leaflet.shapefile" target="_blank">Leaflet Shapefile</a>,
 that will add a shapefile to your map. We will cover these at a later 
date, when we look at plugins and the additional capabilities they add 
to Leaflet.</p>

<h2>In Conclusion...</h2>

<p>To wrap up, lets leave it here for this lesson. We covered the 
majority of fundamentals for creating, adding data, and displaying a 
Leaflet map. Continue to explore the <a href="http://leafletjs.com/reference.html" title="Leaflet Documentation" target="_blank">documentation on the Leaflet site</a> to see what you can do with the various elements of the map we worked on in this session.</p>
<!--
<p>Additionally, you might want to get your map on the internet and show it to the world.</p>

<a href="http://duspviz.mit.edu/get-map-on-the-internet/" title="Get your Map on the Internet" target="_blank">How to get your Map on the Internet</a> -->

<p>The next session in the Web Map Workshop will introduce JavaScript, 
going over the concepts and fundamentals to add functionality to our web
 pages and web maps.</p>

<hr>

		<div class="text-center">

			<iframe src="https://web.archive.org/web/20200129013311if_/https://www.youtube.com/embed/p9dx1FbtWmg" allowfullscreen="" width="560" height="315" frameborder="0"></iframe>

			<div class="caption" style="text-align: center">

				<h5>Video of DUSPviz Leaflet Tutorial, Spring 2016</h5>

			</div>

		</div>

<hr>
<div id="nextWorkshop"><a href="http://duspviz.mit.edu/web-map-workshop/javascript-an-introduction/" title="JavaScript: A Mapper's Introduction">JavaScript: A Mapper's Introduction <i style="margin-left: 5px;" class="fa fa-arrow-right"></i></a></div>
<div id="prevWorkshop"><a href="http://duspviz.mit.edu/web-map-workshop/bootstrap-templates/" title="Using Bootstrap: Website Frameworks and Templates"><i style="margin-right: 5px;" class="fa fa-arrow-left"></i>Using Bootstrap: Website Frameworks and Templates</a></div>
<hr>

<a href="http://duspviz.mit.edu/workshops/" title="Tutorials and Resources">Return to DUSPVIZ tutorials page</a>
</div>

</div><!--/right-->

		<!-- Script References -->
		<script src="DUSPviz_files/jquery_002.js"></script>
		<script src="DUSPviz_files/bootstrap.js"></script>
		<script src="DUSPviz_files/prism.js"></script>
		<script src="DUSPviz_files/jquery.js"></script>
		<script src="DUSPviz_files/scrolling-nav.js"></script>
		<script src="DUSPviz_files/scripts.js"></script>
		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','//web.archive.org/web/20200129013311/http://www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-60447785-1', 'auto');
			ga('send', 'pageview');
		</script>
	

</div></div></body></html>
<!--
     FILE ARCHIVED ON 01:33:11 Jan 29, 2020 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 14:53:44 Sep 24, 2021.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  captures_list: 114.183
  exclusion.robots: 0.281
  exclusion.robots.policy: 0.271
  RedisCDXSource: 3.657
  esindex: 0.007
  LoadShardBlock: 90.98 (3)
  PetaboxLoader3.datanode: 95.918 (4)
  CDXLines.iter: 16.389 (3)
  load_resource: 110.801
  PetaboxLoader3.resolve: 25.191
-->